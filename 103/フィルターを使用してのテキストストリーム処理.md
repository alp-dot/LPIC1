# フィルターを使用してのテキストストリーム処理

## 1. ODコマンド（Octal Dump）

ODコマンドは、ファイルの内容を様々な形式（8進数、16進数、ASCII文字など）で表示するためのコマンドです。主にバイナリファイルの内容を確認する際に使用されます。

### 基本的な書式
```bash
od [オプション] [ファイル名]
```

### 主なオプション
- `-t c` または `-c`: ASCII文字とエスケープシーケンスで表示
- `-t x`: 16進数で表示
- `-t o`: 8進数で表示（デフォルト値）
- `-t d`: 10進数で表示

### 使用例
ASCII文字とエスケープシーケンスでファイルを表示する場合：
```bash
od -c /bin/ls
```

### 特徴
- バイナリファイルを人間が読める形式に変換
- ファイルの内容を詳細に分析可能
- 各行の先頭にはファイルの先頭からのオフセット（位置）を表示
- デバッグやファイルフォーマットの解析に便利

## 2. trコマンド

trコマンドは、標準入力から受け取ったテキストの文字を変換または削除するためのコマンドです。

### 基本的な書式
```bash
tr [オプション] [文字列1 [文字列2]]
```

または、ファイルを使用する場合：
```bash
cat ファイル名 | tr [オプション] [文字列1 [文字列2]]
tr [オプション] [文字列1 [文字列2]] < ファイル名
```

### 主な文字クラス
- `[:space:]`: スペース、タブ、改行などの空白文字
- `[:digit:]`: 数字（0-9）
- `[:upper:]`: 大文字（A-Z）
- `[:lower:]`: 小文字（a-z）
- `[:alpha:]`: アルファベット（a-zA-Z）
- `[:alnum:]`: アルファベットと数字（a-zA-Z0-9）

### 主なオプション
- `-d`: 指定した文字を削除
- `-s`: 指定した文字の連続を1つに圧縮
- `-c`: 指定した文字以外を処理対象とする

### 使用例
1. 連続したスペースを1つに圧縮：
```bash
cat file | tr -s [:space:]
```

2. 大文字を小文字に変換：
```bash
echo "HELLO" | tr [:upper:] [:lower:]
```

### 特徴
- 標準入力からのみデータを受け付ける
- パイプやリダイレクトと組み合わせて使用
- 文字クラスを使用して柔軟な文字変換が可能
- 文字の変換、削除、圧縮などの基本的なテキスト処理に有用

## 3. sortコマンド

sortコマンドは、テキストファイルの内容を行単位でソートするためのコマンドです。

### 基本的な書式
```bash
sort [オプション] [ファイル名]
```

### 主なオプション
- `-n`: 数値としてソート
- `-r`: 逆順（降順）でソート
- `-k 数字`: 指定した列（フィールド）でソート
- `-t 文字`: フィールドの区切り文字を指定
- `-u`: 重複行を削除してソート
- `-f`: 大文字小文字を区別しない
- `-b`: 先頭の空白を無視

### 使用例
1. 基本的なソート：
```bash
sort file.txt
```

2. 数値でソート：
```bash
sort -n numbers.txt
```

3. カンマ区切りファイルの2列目で数値ソート：
```bash
sort -t',' -k2 -n data.csv
```

4. 重複を削除して逆順ソート：
```bash
sort -ur names.txt
```

### 特徴
- 行単位でソートを実行
- 複数のファイルを同時に処理可能
- 標準入力からのソートも可能
- デフォルトは文字列としての辞書順ソート
- 大量のデータも効率的に処理可能

## 4. 行番号を付けるコマンド

### nlコマンド
テキストファイルに行番号を付けて出力するためのコマンドです。

#### 基本的な書式
```bash
nl [オプション] [ファイル名]
```

#### 主なオプション
- `-b a`: 全ての行に行番号を付ける
- `-b t`: 空行以外の行に行番号を付ける（デフォルト）
- `-n ln`: 行番号を左詰めで表示
- `-n rn`: 行番号を右詰めで表示（デフォルト）
- `-w 数字`: 行番号の表示幅を指定

### catコマンド（行番号表示機能）
catコマンドも行番号を付けて表示することができます。

#### 基本的な書式
```bash
cat [オプション] [ファイル名]
```

#### 行番号関連のオプション
- `-n`: 全ての行に行番号を付ける
- `-b`: 空行以外の行に行番号を付ける

### 使用例
1. 空行以外に行番号を付ける（nlコマンド）：
```bash
nl file
```

2. 空行以外に行番号を付ける（catコマンド）：
```bash
cat -b file
```

3. 全ての行に行番号を付ける：
```bash
nl -b a file
# または
cat -n file
```

### 特徴
- nlコマンドはより柔軟な行番号表示が可能
- catコマンドはシンプルな行番号表示に適している
- どちらも空行の扱いを選択可能
- nlコマンドは行番号の表示形式をカスタマイズ可能

## 5. grepコマンド

grepコマンドは、テキストファイルから指定したパターンに一致する行を検索するためのコマンドです。名前の由来は "Global Regular Expression Print" の略です。

### 基本的な書式
```bash
grep [オプション] パターン [ファイル名...]
```

### 主なオプション
- `-i`: 大文字小文字を区別せずに検索
- `-v`: パターンに一致しない行を表示
- `-n`: 行番号も表示
- `-r` または `-R`: ディレクトリを再帰的に検索
- `-l`: パターンを含むファイル名のみ表示
- `-c`: パターンに一致した行数を表示
- `-E`: 拡張正規表現を使用（egrepと同等）
- `-F`: 正規表現ではなく固定文字列として検索（fgrepと同等）

### 使用例
1. 基本的な検索：
```bash
grep "pattern" file.txt
```

2. 複数ファイルからの検索：
```bash
grep "pattern" file1.txt file2.txt
```

3. 大文字小文字を区別せずに検索：
```bash
grep -i "pattern" file.txt
```

4. ディレクトリ内を再帰的に検索：
```bash
grep -r "pattern" /path/to/directory
```

### 正規表現の基本
- `.`: 任意の1文字にマッチ
- `^`: 行の先頭にマッチ
- `$`: 行の末尾にマッチ
- `[abc]`: 括弧内の任意の1文字にマッチ
- `[^abc]`: 括弧内の文字以外の任意の1文字にマッチ
- `*`: 直前の文字の0回以上の繰り返しにマッチ
- `\`: エスケープ文字

### 特徴
- テキスト検索の標準的なツール
- パイプラインと組み合わせて柔軟に使用可能
- 強力な正規表現検索に対応
- 大量のテキストデータから情報を抽出するのに適している

---

## 参考資料
- Linux標準教科書（LPI）
- GNU Coreutils マニュアル
- GNU grep マニュアル
- Pro Bash Programming（Apress）
